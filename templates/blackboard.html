<div id="canvas_wrapper">
      <canvas id="secondary_canvas" width="100" height="100"></canvas>
      <canvas id="main_canvas" width="100" height="100"></canvas>

      <div id="pencil_button_bar">
            <!-- SVG icons from https://github.com/tabler/tabler-icons/ -->
            <button id="ts_visibility_button" class="active" title="Toggle visiblity (, comma)"
                  onclick="switch_visibility();">
                  <svg t="1742972294159" class="icon" viewBox="0 0 1024 1024" version="1.1"
                        xmlns="http://www.w3.org/2000/svg" p-id="2644" width="200" height="200">
                        <path d="M332.8 729.6l34.133333-34.133333c42.666667 12.8 93.866667 21.333333 145.066667 21.333333 162.133333 0 285.866667-68.266667 375.466667-213.333333-46.933333-72.533333-102.4-128-166.4-162.133334l29.866666-29.866666c72.533333 42.666667 132.266667 106.666667 183.466667 192-98.133333 170.666667-243.2 256-426.666667 256-59.733333 4.266667-119.466667-8.533333-174.933333-29.866667z m-115.2-64c-51.2-38.4-93.866667-93.866667-132.266667-157.866667 98.133333-170.666667 243.2-256 426.666667-256 38.4 0 76.8 4.266667 110.933333 12.8l-34.133333 34.133334c-25.6-4.266667-46.933333-4.266667-76.8-4.266667-162.133333 0-285.866667 68.266667-375.466667 213.333333 34.133333 51.2 72.533333 93.866667 115.2 128l-34.133333 29.866667z m230.4-46.933333l29.866667-29.866667c8.533333 4.266667 21.333333 4.266667 29.866666 4.266667 46.933333 0 85.333333-38.4 85.333334-85.333334 0-12.8 0-21.333333-4.266667-29.866666l29.866667-29.866667c12.8 17.066667 17.066667 38.4 17.066666 64 0 72.533333-55.466667 128-128 128-17.066667-4.266667-38.4-12.8-59.733333-21.333333zM384 499.2c4.266667-68.266667 55.466667-119.466667 123.733333-123.733333 0 4.266667-123.733333 123.733333-123.733333 123.733333zM733.866667 213.333333l29.866666 29.866667-512 512-34.133333-29.866667L733.866667 213.333333z"
                              fill="#444444" p-id="2645"></path>
                  </svg>
            </button>

            <button id="ts_write_button" class="active" title="切换画笔 (W)" onclick="switch_drawing_mode();">
                  <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
                        stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4"></path>
                        <path d="M13.5 6.5l4 4"></path>
                  </svg>
            </button>

            <button id="ts_eraser_button" title="Toggle Eraser (Alt + Q)">
                  <!-- ERASER_ICON_SVG_PLACEHOLDER -->
            </button>

            <button id="ts_line_button" title="Line Tool (Alt + L)" onclick="switch_line_mode();">
                  <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
                        stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 19l14-14"></path>
                  </svg>
            </button>

            <button id="ts_rectangle_button" title="Rectangle Tool (Alt + R)" onclick="switch_rectangle_mode();">
                  <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
                        stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 3h18v18h-18z"></path>
                  </svg>
            </button>

            <button id="ts_perfect_freehand_button" title="Perfect Freehand (Alt + x)"
                  onclick="switch_perfect_freehand()">
                  <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
                        stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 20l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4h4z"></path>
                        <path d="M13.5 6.5l4 4"></path>
                        <path d="M16 18h4m-2 -2v4"></path>
                  </svg>
            </button>

            <button id="ts_kanji_button" title="Toggle calligrapher (Alt + c)" onclick="switch_drawing_mode();">
                  <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
                        stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 21v-4a4 4 0 1 1 4 4h-4"></path>
                        <path d="M21 3a16 16 0 0 0 -12.8 10.2"></path>
                        <path d="M21 3a16 16 0 0 1 -10.2 12.8"></path>
                        <path d="M10.6 9a9 9 0 0 1 4.4 4.4"></path>
                  </svg>
            </button>

            <button id="ts_undo_button" title="Undo the last stroke (Alt + z)" onclick="ts_undo();">
                  <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
                        stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4.05 11a8 8 0 1 1 .5 4m-.5 5v-5h5"></path>
                  </svg>
            </button>

            <button class="" title="Clean canvas (. dot)" onclick="clear_canvas();">
                  <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
                        stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 7h16"></path>
                        <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path>
                        <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path>
                        <path d="M10 12l4 4m0 -4l-4 4"></path>
                  </svg>
            </button>

            <button id="ts_switch_fullscreen_button" class="active" title="Toggle fullscreen canvas(Alt + b)"
                  onclick="switch_small_canvas();">
                  <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
                        stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
                        <path
                              d="M9.00002 3.99998H4.00004L4 9M20 8.99999V4L15 3.99997M15 20H20L20 15M4 15L4 20L9.00002 20">
                        </path>
                  </svg>
            </button>

            <button id="ts_restore_window_size_button" title="Restore to writing window size"
                  onclick="restore_window_size();">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
                        stroke="currentColor" fill="none" stroke-width="1.5">
                        <!-- 外部大矩形表示主窗口 -->
                        <rect x="3" y="5" width="18" height="14" rx="1" />
                        <!-- 右上角的小矩形，宽度9高度7，保持右上贴边 -->
                        <rect x="12" y="5" width="9" height="7" rx="1" />
                  </svg>
            </button>

            <button id="ts_flip_to_question_button" title="Flip to question side" onclick="flip_to_question();">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
                        stroke="currentColor" fill="none" stroke-width="1.5">
                        <path d="M12 3L4 10h4v10h8V10h4z" />
                  </svg>
            </button>
      </div>
</div>